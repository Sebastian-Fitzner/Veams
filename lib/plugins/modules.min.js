!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("plugins/modules",[],t):"object"==typeof exports?exports["plugins/modules"]=t():(e["plugins/modules"]=e["plugins/modules"]||{},e["plugins/modules"]["plugins/modules"]=t())}(this,function(){return function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=o(6),s=o(7),l=o(8),u={},a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.Veams,o=arguments[1];n(this,e),u=t;var i={attrPrefix:"data-js",logs:!1,useMutationObserver:!1};this.options=u.helpers.defaults(o||{},i),this.list={},this.modulesInContext=[],this.initialize()}return i(e,[{key:"initialize",value:function(){this.queryString="["+this.options.attrPrefix+"-module]",this.modulesInContext=s(this.queryString),this.options.useMutationObserver&&this.observe(document.body),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this;return u.Vent||this.options.useMutationObserver!==!1?void(u.Vent&&u.Vent.on(u.EVENTS.DOMchanged,function(t,o){e.modulesInContext=e.getModulesInContext(o),e.options.logs&&console.info("VeamsModules :: Recording new context. When available new modules will be initialised in: ",o),e.registerAll()})):void console.info('VeamsModules :: In order to work with the the ajax handling in VeamsModulesHandler you need to define "useMutationObserver" or use the VeamsVent plugin!')}},{key:"save",value:function(e,t){this.list[e.name]?this.list[e.name].nodes.push(t):(this.list[e.name]=e,this.list[e.name].nodes=[t]),u.Vent&&u.Vent.trigger(u.EVENTS.moduleRegistered,{module:e,el:t})}},{key:"register",value:function(e){if(!Array.isArray(e))throw new Error("VeamsModules :: You need to pass an array to register()!");this.modulesList=e,this.registerAll()}},{key:"registerAll",value:function(){var e=this;this.modulesList&&this.modulesList.forEach(function(t){e.registerOne(t)})}},{key:"registerOne",value:function(e){if(!e.domName)throw new Error("VeamsModules :: In order to work with register() you need to define the module name as string!");if(!e.module)throw new Error("VeamsModules :: In order to work with register() you need to define a module!");this.initModules(e.domName,e.module,e.render,e.options,e.cb)}},{key:"initModules",value:function(e,t,o,n,i){var r=this;l(this.modulesInContext,function(s,l){r.initModule(l,e,t,o,n,i)})}},{key:"initModule",value:function(e,t,o,n,i,s){var l=e.getAttribute(this.options.attrPrefix+"-no-render")||n===!1||!1,u=e.getAttribute(this.options.attrPrefix+"-module").split(" ");if(u.indexOf(t)!==-1){var a=e.getAttribute("data-js-options"),d=r(i||{},JSON.parse(a)),f=new o({el:e,options:d,namespace:t});l||f.render(),s&&"function"==typeof s&&s(f,d)}}},{key:"observe",value:function(e){var t=this,o=new MutationObserver(function(e){for(var o=0;o<e.length;++o)for(var n=0;n<e[o].addedNodes.length;++n){var i=e[o].addedNodes[n];if(i instanceof HTMLElement){if(i.getAttribute(t.options.attrPrefix+"-module")){var r=i.getAttribute(t.options.attrPrefix+"-module");t.options.logs&&console.info("VeamsModules :: Recording new module: ",i,r);var s=!0,l=!1,u=void 0;try{for(var a,d=t.modulesList[Symbol.iterator]();!(s=(a=d.next()).done);s=!0){var f=a.value;if(f.domName===r){t.initModule(i,f.domName,f.module,f.render,f.options,f.cb);break}}}catch(c){l=!0,u=c}finally{try{!s&&d["return"]&&d["return"]()}finally{if(l)throw u}}}t.getModulesInContext(i).length&&(t.modulesInContext=t.getModulesInContext(i),t.options.logs&&console.info("VeamsModules :: Recording new context. When available new modules will be initialised in: ",i),t.registerAll())}}});o.observe(e,{childList:!0,subtree:!0})}},{key:"getModulesInContext",value:function(e){return s(this.queryString,e)}}]),e}(),d={pluginName:"ModulesHandler",initialize:function(e,t){e.modules=e.modules||new a(e,t)}};t["default"]=d,e.exports=t["default"]},,,,,,function(e,t){"use strict";window.Veams||(window.Veams={}),window.Veams.helpers||(window.Veams.helpers={});var o=window.Veams.helpers;o.defaults=function(e){return[].slice.call(arguments,1).forEach(function(t){for(var o in t)void 0===e[o]&&(e[o]=t[o])}),e},e.exports=o.defaults},function(e,t){"use strict";window.Veams||(window.Veams={}),window.Veams.helpers||(window.Veams.helpers={});var o=window.Veams.helpers;o.querySelectorArray=o.$=function(e,t){if(!e)throw new Error("In order to work with querySelectorArray you need to define an element as string!");var o=e,n=t||document;return Array.prototype.slice.call(n.querySelectorAll(o))},e.exports=o.querySelectorArray},function(e,t){"use strict";window.Veams||(window.Veams={}),window.Veams.helpers||(window.Veams.helpers={});var o=window.Veams.helpers;o.forEach=function(e,t,o){for(var n=0;n<e.length;n++)t.call(o,n,e[n])},e.exports=o.forEach}])});
//# sourceMappingURL=modules.min.js.map