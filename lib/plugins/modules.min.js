!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("plugins/modules",[],t):"object"==typeof exports?exports["plugins/modules"]=t():(e["plugins/modules"]=e["plugins/modules"]||{},e["plugins/modules"]["plugins/modules"]=t())}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(7),s=n(8),u=n(9),l={},a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.Veams;o(this,e),l=t,this.list={},this.modulesInContext=[],this.queryString="["+l.options.attrPrefix+"-module]",this.initialize()}return r(e,[{key:"initialize",value:function(){this.modulesInContext=s(this.queryString),this.observe(document.body),this.bindEvents()}},{key:"bindEvents",value:function(){}},{key:"save",value:function(e,t){this.list[e.name]?this.list[e.name].nodes.push(t):(this.list[e.name]=e,this.list[e.name].nodes=[t]),l.Vent&&l.Vent.trigger(l.EVENTS.moduleRegistered,{module:e,el:t})}},{key:"register",value:function(e){if(!Array.isArray(e))throw new Error("You need to pass an array to register()!");this.modulesList=e}},{key:"registerAll",value:function(){var e=this;this.modulesList&&this.modulesList.forEach(function(t){e.registerOne(t)})}},{key:"registerOne",value:function(e){if(!e.domName)throw new Error("In order to work with register() you need to define the module name as string!");if(!e.module)throw new Error("In order to work with register() you need to define a module!");this.initModules(e.domName,e.module,e.render,e.options,e.cb)}},{key:"initModules",value:function(e,t,n,o,r){u(this.modulesInContext,function(s,u){var a=u.getAttribute(l.options.attrPrefix+"-no-render")||n===!1||!1,d=u.getAttribute(l.options.attrPrefix+"-module").split(" ");if(d.indexOf(e)!==-1){var f=u.getAttribute("data-js-options"),c=i(o||{},JSON.parse(f)),m=new t({el:u,options:c,namespace:e});a||m.render(),r&&"function"==typeof r&&r(m,c)}})}},{key:"observe",value:function(e){var t=this,n=new MutationObserver(function(e){e.forEach(function(e){var n={mutation:e,el:e.target,value:e.target.textContent,oldValue:e.oldValue};n.el instanceof HTMLElement&&(console.log("Recording mutation in ",n.el),t.modulesInContext=t.getModulesInContext(n.el),t.registerAll())})});n.observe(e,{attributes:!0,childList:!0,subtree:!0})}},{key:"getModulesInContext",value:function(e){return s(this.queryString,e)}}]),e}(),d={pluginName:"ModulesHandler",initialize:function(e){e.modules=e.modules||new a(e)}};t["default"]=d,e.exports=t["default"]},,,,,,,function(e,t){"use strict";window.Veams||(window.Veams={}),window.Veams.helpers||(window.Veams.helpers={});var n=window.Veams.helpers;n.defaults=function(e){return[].slice.call(arguments,1).forEach(function(t){for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},e.exports=n.defaults},function(e,t){"use strict";window.Veams||(window.Veams={}),window.Veams.helpers||(window.Veams.helpers={});var n=window.Veams.helpers;n.querySelectorArray=n.$=function(e,t){if(!e)throw new Error("In order to work with querySelectorArray you need to define an element as string!");var n=e,o=t||document;return Array.prototype.slice.call(o.querySelectorAll(n))},e.exports=n.querySelectorArray},function(e,t){"use strict";window.Veams||(window.Veams={}),window.Veams.helpers||(window.Veams.helpers={});var n=window.Veams.helpers;n.forEach=function(e,t,n){for(var o=0;o<e.length;o++)t.call(n,o,e[o])},e.exports=n.forEach}])});
//# sourceMappingURL=modules.min.js.map